<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <textarea id="send" style="width: 300px;height: 300px;"></textarea>
    <button id="btn">发送</button>
    <button id="clear">清空</button>
    <textarea id="receive" style="width: 300px;height: 300px;"></textarea>
    
    
    
    
    
    <script type="text/javascript" src="js/jquery-3.5.0.min.js"></script>
    <script type="text/javascript">

       $(function () {
           console.info("【欢迎使用 JQuery 3.5.0】");
       })
        
        $('#btn').on('click', function () {
            console.info('调用发送');
        })



        if ("WebSocket" in window) {
            alert("您的浏览器支持 WebSocket!");

            // 打开一个 web socket
            var ws = new WebSocket("ws://127.0.0.1:19999/ws?userId=1&telephone=18512451650&token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyIjoiMV8xODUxMjQ1MTY1MCJ9._PyzwylKUARLgNhGqxqKo2dFHTxa8p842_C4GaZK0v4");

            ws.onopen = function() {
                alert("数据发送中...");
                // Web Socket 已连接上，使用 send() 方法发送数据
                var data = "{\"messageType\": 2}";
                ws.send(data);
            };

            ws.onmessage = function (evt) {
                debugger;
                var receivedMsg = evt.data;
                alert("数据已接收..." + receivedMsg);
            };

            ws.onclose = function() {
                // 关闭 websocket
                alert("连接已关闭...");
            };
        } else {
            // 浏览器不支持 WebSocket
            alert("您的浏览器不支持 WebSocket!");
        }

    </script>
</body>
</html>